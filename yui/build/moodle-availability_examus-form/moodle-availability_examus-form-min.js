YUI.add("moodle-availability_examus-form",function(O,e){M.availability_examus=M.availability_examus||{},M.availability_examus.form=O.Object(M.core_availability.plugin),M.availability_examus.form.rules=null,M.availability_examus.form.initInner=function(e,i){this.rules=e,this.groups=i},M.availability_examus.form.instId=0,M.availability_examus.form.getNode=function(e){var i,a,n,t,l,o,u,r,s,c,d,m,p,f,g,b,v,h,_,x,y,k;function q(e){return M.util.get_string(e,"availability_examus")}function I(e,i,a){return'<span class="availability-group form-group mb-2"><div class="col-md-5 col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+i+'</label></div><div class="col-md-7 form-inline align-items-start felement">'+a+"</div></span>"}function R(e){setTimeout(e,0)}for(b in M.availability_examus.form.instId+=1,l=(t="examus"+M.availability_examus.form.instId)+"_duration",o=t+"_mode",u=t+"_schedulingRequired",r=t+"_autoRescheduling",s=t+"_isTrial",c=t+"_identification",d=t+"_customRules",m=t+"_noProtection",p=t+"_auxCamera",f=t+"userAgreement",i="<label><strong>"+q("title")+"</strong></label><br><br>",i+=I(l,q("duration"),'<input type="text" name="duration" id="'+l+'" class="form-control">'),i+=I(o,q("mode"),'<select name="mode" id="'+o+'" class="custom-select">  <option value="normal">'+q("normal_mode")+'</option>  <option value="identification">'+q("identification_mode")+'</option>  <option value="olympics">'+q("olympics_mode")+'</option>  <option value="auto">'+q("auto_mode")+"</option></select>"),i+=I(c,q("identification"),'<select name="identification" id="'+c+'" class="custom-select">  <option value="passport">'+q("passport_identification")+'</option>  <option value="face">'+q("face_identification")+'</option>  <option value="face_and_passport">'+q("face_passport_identification")+'</option>  <option value="skip">'+q("skip_identification")+"</option></select>"),i+=I(u,q("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+u+'" value="1">&nbsp;<label for="'+u+'">'+q("enable")+"</label> "),i+=I(r,q("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+r+'" value="1">&nbsp;<label for="'+r+'">'+q("enable")+"</label> "),i+=I(s,q("is_trial"),'<input type="checkbox" name="istrial" id="'+s+'" value="1">&nbsp;<label for="'+s+'">'+q("enable")+"</label> "),i+=I(m,q("noprotection"),'<input type="checkbox" name="noprotection" id="'+m+'" value="1">&nbsp;<label for="'+m+'">'+q("enable")+"</label> "),i+=I(s,q("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+p+'" value="1">&nbsp;<label for="'+p+'">'+q("enable")+"</label> "),i+=I(f,q("user_agreement_url"),'<input name="useragreementurl" id="'+f+'" class="form-control" value="" />'),i+=I(d,q("custom_rules"),'<textarea name="customrules" id="'+d+'" style="width: 100%" class="form-control"></textarea>'),g="",this.rules)g+='  <br><input type="checkbox" name="'+b+'" id="'+(v=t+"_"+b)+'" value="'+b+'" >',g+='  <label for="'+v+'">'+q(b)+"</label>";if(i+=I(null,q("rules"),'<div class="rules"'+g+"</div>"),this.groups){for(_ in h="",this.groups)t=this.groups[_].id,x=this.groups[_].name,h+="<br><label><input value="+t+' type="checkbox" name=groups[] '+(e.groups instanceof Array&&-1<e.groups.indexOf(t)?"checked":"")+">&nbsp;"+x+"</label>";i+=I(null,q("select_groups"),'<div class="groups"'+h+"</div>")}for(y in e.creating&&(e.mode="normal",e.scheduling_required=!0),a=O.Node.create("<span> "+i+" </span>"),e.duration!==undefined&&a.one("input[name=duration]").set("value",e.duration),e.mode!==undefined&&a.one("select[name=mode] option[value="+e.mode+"]").set("selected","selected"),e.identification!==undefined&&a.one("select[name=identification] option[value="+e.identification+"]").set("selected","selected"),e.auto_rescheduling!==undefined&&(n=e.auto_rescheduling?"checked":null,a.one("#"+r).set("checked",n)),e.noprotection!==undefined&&(n=e.noprotection?"checked":null,a.one("#"+m).set("checked",n)),e.istrial!==undefined&&(n=e.istrial?"checked":null,a.one("#"+s).set("checked",n)),e.auxiliarycamera!==undefined&&(n=e.auxiliarycamera?"checked":null,a.one("#"+p).set("checked",n)),e.scheduling_required!==undefined&&(n=e.scheduling_required?"checked":null,a.one("#"+u).set("checked",n)),e.rules===undefined&&(e.rules=this.rules),e.rules)e.rules[y]&&(k=a.one(".rules input[name="+y+"]"))&&k.set("checked","checked");return e.customrules!==undefined&&a.one("#"+d).set("value",e.customrules),e.useragreementurl!==undefined&&a.one("#"+f).set("value",e.useragreementurl),a.delegate("valuechange",function(){R(function(){M.core_availability.form.update()})},"input,textarea,select"),a.delegate("click",function(){R(function(){M.core_availability.form.update()})},"input[type=checkbox]"),a.delegate("valuechange",function(){var e,i;e=["normal","identification"],i=a.one("select[name=mode]").get("value").trim(),e=0<=e.indexOf(i),a.one("#"+u).set("checked",e)},"#"+o),a},M.availability_examus.form.fillValue=function(a,e){var i,n;a.duration=e.one("input[name=duration]").get("value").trim(),a.mode=e.one("select[name=mode]").get("value").trim(),a.identification=e.one("select[name=identification]").get("value").trim(),a.auto_rescheduling=e.one("input[name=auto_rescheduling]").get("checked"),a.scheduling_required=e.one("input[name=scheduling_required]").get("checked"),a.istrial=e.one("input[name=istrial]").get("checked"),a.customrules=e.one("textarea[name=customrules]").get("value").trim(),a.noprotection=e.one("input[name=noprotection]").get("checked"),a.useragreementurl=e.one("input[name=useragreementurl]").get("value").trim(),a.auxiliarycamera=e.one("input[name=auxiliarycamera]").get("checked"),a.rules={},i=e.all(".rules input"),O.each(i,function(e){n=e.get("value"),!0===e.get("checked")?a.rules[n]=!0:a.rules[n]=!1}),a.groups=[],i=e.all(".groups input"),O.each(i,function(e){var i=e.get("value");!0===e.get("checked")&&a.groups.push(i)})},M.availability_examus.form.fillErrors=function(e,i){var a={};this.fillValue(a,i),
a.duration!==undefined&&new RegExp("^\\d+$").test(a.duration)&&a.duration%30==0||e.push("availability_examus:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});