YUI.add("moodle-availability_examus-form",function(e,t){M.availability_examus=M.availability_examus||{},M.availability_examus.form=e.Object(M.core_availability.plugin),M.availability_examus.form.rules=null,M.availability_examus.form.initInner=function(e,t){this.rules=e,this.groups=t},M.availability_examus.form.instId=0,M.availability_examus.form.getNode=function(t){function n(e){return M.util.get_string(e,"availability_examus")}function r(e,t,n){return'<span class="availability-group form-group mb-2"><div class="col-md-5 col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+t+"</label>"+"</div>"+'<div class="col-md-7 form-inline align-items-start felement">'+n+"</div>"+"</span>"}function i(){var e=["normal","identification"],t=u.one("select[name=mode]").get("value").trim(),n=e.indexOf(t)>=0;u.one("#"+h).set("checked",n)}function s(e){setTimeout(e,0)}var o,u,a;M.availability_examus.form.instId+=1;var f="examus"+M.availability_examus.form.instId,l=f+"_duration",c=f+"_mode",h=f+"_schedulingRequired",p=f+"_autoRescheduling",d=f+"_isTrial",v=f+"_identification",m=f+"_customRules",g=f+"_noProtection",y=f+"_auxCamera",b=f+"userAgreement";o="<label><strong>"+n("title")+"</strong></label><br><br>",o+=r(l,n("duration"),'<input type="text" name="duration" id="'+l+'" class="form-control">'),o+=r(c,n("mode"),'<select name="mode" id="'+c+'" class="custom-select">'+'  <option value="normal">'+n("normal_mode")+"</option>"+'  <option value="identification">'+n("identification_mode")+"</option>"+'  <option value="olympics">'+n("olympics_mode")+"</option>"+'  <option value="auto">'+n("auto_mode")+"</option>"+"</select>"),o+=r(v,n("identification"),'<select name="identification" id="'+v+'" class="custom-select">'+'  <option value="passport">'+n("passport_identification")+"</option>"+'  <option value="face">'+n("face_identification")+"</option>"+'  <option value="face_and_passport">'+n("face_passport_identification")+"</option>"+'  <option value="skip">'+n("skip_identification")+"</option>"+"</select>"),o+=r(h,n("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+h+'" value="1">&nbsp;'+'<label for="'+h+'">'+n("enable")+"</label> "),o+=r(p,n("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+p+'" value="1">&nbsp;'+'<label for="'+p+'">'+n("enable")+"</label> "),o+=r(d,n("is_trial"),'<input type="checkbox" name="istrial" id="'+d+'" value="1">&nbsp;'+'<label for="'+d+'">'+n("enable")+"</label> "),o+=r(g,n("noprotection"),'<input type="checkbox" name="noprotection" id="'+g+'" value="1">&nbsp;'+'<label for="'+g+'">'+n("enable")+"</label> "),o+=r(d,n("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+y+'" value="1">&nbsp;'+'<label for="'+y+'">'+n("enable")+"</label> "),o+=r(b,n("user_agreement_url"),'<input name="useragreementurl" id="'+b+'" class="form-control" value="" />'),o+=r(m,n("custom_rules"),'<textarea name="customrules" id="'+m+'" style="width: 100%" class="form-control"></textarea>');var w="";for(var E in this.rules){var S=f+"_"+E;w+='  <br><input type="checkbox" name="'+E+'" id="'+S+'" value="'+E+'" >',w+='  <label for="'+S+'">'+n(E)+"</label>"}o+=r(null,n("rules"),'<div class="rules"'+w+"</div>");if(this.groups){var x="";for(var T in this.groups){f=this.groups[T].id;var N=this.groups[T].name,C=t.groups instanceof Array&&t.groups.indexOf(f)>-1?"checked":"";x+="<br><label><input value="+f+' type="checkbox" name=groups[] '+C+">"+"&nbsp;"+N+"</label>"}o+=r(null,n("select_groups"),'<div class="groups"'+x+"</div>")}t.creating&&(t.mode="normal",t.scheduling_required=!0),u=e.Node.create("<span> "+o+" </span>"),t.duration!==undefined&&u.one("input[name=duration]").set("value",t.duration),t.mode!==undefined&&u.one("select[name=mode] option[value="+t.mode+"]").set("selected","selected"),t.identification!==undefined&&u.one("select[name=identification] option[value="+t.identification+"]").set("selected","selected"),t.auto_rescheduling!==undefined&&(a=t.auto_rescheduling?"checked":null,u.one("#"+p).set("checked",a)),t.noprotection!==undefined&&(a=t.noprotection?"checked":null,u.one("#"+g).set("checked",a)),t.istrial!==undefined&&(a=t.istrial?"checked":null,u.one("#"+d).set("checked",a)),t.auxiliarycamera!==undefined&&(a=t.auxiliarycamera?"checked":null,u.one("#"+y).set("checked",a)),t.scheduling_required!==undefined&&(a=t.scheduling_required?"checked":null,u.one("#"+h).set("checked",a)),t.rules===undefined&&(t.rules=this.rules);for(var k in t.rules)t.rules[k]&&u.one(".rules input[name="+k+"]").set("checked","checked");return t.customrules!==undefined&&u.one("#"+m).set("value",t.customrules),t.useragreementurl!==undefined&&u.one("#"+b).set("value",t.useragreementurl),u.delegate("valuechange",function(){s(function(){M.core_availability.form.update()})},"input,textarea,select"),u.delegate("click",function(){s(function(){M.core_availability.form.update()})},"input[type=checkbox]"),u.delegate("valuechange",function(){i()},"#"+c),u},M.availability_examus.form.fillValue=function(t,n){var r,i;t.duration=n.one("input[name=duration]").get("value").trim(),t.mode=n.one("select[name=mode]").get("value").trim(),t.identification=n.one("select[name=identification]").get("value").trim(),t.auto_rescheduling=n.one("input[name=auto_rescheduling]").get("checked"),t.scheduling_required=n.one("input[name=scheduling_required]").get("checked"),t.istrial=n.one("input[name=istrial]").get("checked"),t.customrules=n.one("textarea[name=customrules]").get("value").trim(),t.noprotection=n.one("input[name=noprotection]").get("checked"),t.useragreementurl=n.one("input[name=useragreementurl]").get("value").trim(),t.auxiliarycamera=n.one("input[name=auxiliarycamera]").get("checked"),t.rules={},r=n.all(".rules input"),e.each(r,function(e){i=e.get("value"),e.get("checked")===!0?t.rules[i]=!0:t.rules[i]=!1}),t.groups=[],r=n.all(".groups input"),e.each(r,function(e){var n=e.get("value");e.get("checked")===!0&&t.groups.push(n)})},M.availability_examus.form.fillErrors=function(e,
t){var n={};this.fillValue(n,t),(n.duration===undefined||!(new RegExp("^\\d+$")).test(n.duration)||n.duration%30!==0)&&e.push("availability_examus:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
