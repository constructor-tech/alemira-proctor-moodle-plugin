YUI.add("moodle-availability_examus-form",function(e,t){M.availability_examus=M.availability_examus||{},M.availability_examus.form=e.Object(M.core_availability.plugin),M.availability_examus.form.rules=null,M.availability_examus.form.initInner=function(e,t){this.rules=e,this.groups=t},M.availability_examus.form.instId=0,M.availability_examus.form.getNode=function(t){function n(e){return M.util.get_string(e,"availability_examus")}function r(e,t,n){return'<span class="availability-group form-group mb-2"><div class="col-md-5 col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+t+"</label>"+"</div>"+'<div class="col-md-7 form-inline align-items-start felement">'+n+"</div>"+"</span>"}var i,s,o,u;M.availability_examus.form.instId+=1;var a="examus"+M.availability_examus.form.instId,f=a+"_duration",l=a+"_mode",c=a+"_schedulingRequired",h=a+"_autoRescheduling",p=a+"_isTrial",d=a+"_identification",v=a+"_customRules",m=a+"_noProtection",g=a+"_auxCamera",y=a+"userAgreement";i="<label><strong>"+n("title")+"</strong></label><br><br>",i+=r(f,n("duration"),'<input type="text" name="duration" id="'+f+'" class="form-control">'),i+=r(l,n("mode"),'<select name="mode" id="'+l+'" class="custom-select">'+'  <option value="normal">'+n("normal_mode")+"</option>"+'  <option value="identification">'+n("identification_mode")+"</option>"+'  <option value="olympics">'+n("olympics_mode")+"</option>"+'  <option value="auto">'+n("auto_mode")+"</option>"+"</select>"),i+=r(d,n("identification"),'<select name="identification" id="'+d+'" class="custom-select">'+'  <option value="passport">'+n("passport_identification")+"</option>"+'  <option value="face">'+n("face_identification")+"</option>"+'  <option value="face_and_passport">'+n("face_passport_identification")+"</option>"+'  <option value="skip">'+n("skip_identification")+"</option>"+"</select>"),i+=r(c,n("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+c+'" value="1">&nbsp;'+'<label for="'+c+'">'+n("enable")+"</label> "),i+=r(h,n("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+h+'" value="1">&nbsp;'+'<label for="'+h+'">'+n("enable")+"</label> "),i+=r(p,n("is_trial"),'<input type="checkbox" name="istrial" id="'+p+'" value="1">&nbsp;'+'<label for="'+p+'">'+n("enable")+"</label> "),i+=r(m,n("noprotection"),'<input type="checkbox" name="noprotection" id="'+m+'" value="1">&nbsp;'+'<label for="'+m+'">'+n("enable")+"</label> "),i+=r(p,n("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+g+'" value="1">&nbsp;'+'<label for="'+g+'">'+n("enable")+"</label> "),i+=r(y,n("user_agreement_url"),'<input name="useragreementurl" id="'+y+'" class="form-control" value="" />'),i+=r(v,n("custom_rules"),'<textarea name="customrules" id="'+v+'" style="width: 100%" class="form-control"></textarea>');var b="";for(var w in this.rules){var E=a+"_"+w;b+='  <br><input type="checkbox" name="'+w+'" id="'+E+'" value="'+w+'" >',b+='  <label for="'+E+'">'+n(w)+"</label>"}i+=r(null,n("rules"),'<div class="rules"'+b+"</div>");if(this.groups){var S="";for(var x in this.groups){a=this.groups[x].id;var T=this.groups[x].name,N=t.groups instanceof Array&&t.groups.indexOf(a)>-1?"checked":"";S+="<br><label><input value="+a+' type="checkbox" name=groups[] '+N+">"+"&nbsp;"+T+"</label>"}i+=r(null,n("select_groups"),'<div class="groups"'+S+"</div>")}s=e.Node.create("<span> "+i+" </span>"),t.duration!==undefined&&s.one("input[name=duration]").set("value",t.duration),t.mode!==undefined&&s.one("select[name=mode] option[value="+t.mode+"]").set("selected","selected"),t.identification!==undefined&&s.one("select[name=identification] option[value="+t.identification+"]").set("selected","selected"),t.auto_rescheduling!==undefined&&(u=t.auto_rescheduling?"checked":null,s.one("#"+h).set("checked",u)),t.noprotection!==undefined&&(u=t.noprotection?"checked":null,s.one("#"+m).set("checked",u)),t.istrial!==undefined&&(u=t.istrial?"checked":null,s.one("#"+p).set("checked",u)),t.auxiliarycamera!==undefined&&(u=t.auxiliarycamera?"checked":null,s.one("#"+g).set("checked",u)),t.scheduling_required!==undefined&&(u=t.scheduling_required?"checked":null,s.one("#"+c).set("checked",u)),t.rules===undefined&&(t.rules=this.rules);for(var C in t.rules)t.rules[C]&&s.one(".rules input[name="+C+"]").set("checked","checked");return t.customrules!==undefined&&s.one("#"+v).set("value",t.customrules),t.useragreementurl!==undefined&&s.one("#"+y).set("value",t.useragreementurl),M.availability_examus.form.addedEvents||(M.availability_examus.form.addedEvents=!0,o=e.one(".availability-field"),o.delegate("valuechange",function(){M.core_availability.form.update()},".availability_examus input,.availability_examus textarea,.availability_examus select"),o.delegate("click",function(){M.core_availability.form.update()},".availability_examus input[type=checkbox],")),s},M.availability_examus.form.fillValue=function(t,n){var r,i;t.duration=n.one("input[name=duration]").get("value").trim(),t.mode=n.one("select[name=mode]").get("value").trim(),t.identification=n.one("select[name=identification]").get("value").trim(),t.auto_rescheduling=n.one("input[name=auto_rescheduling]").get("checked"),t.scheduling_required=n.one("input[name=scheduling_required]").get("checked"),t.istrial=n.one("input[name=istrial]").get("checked"),t.customrules=n.one("textarea[name=customrules]").get("value").trim(),t.noprotection=n.one("input[name=noprotection]").get("checked"),t.useragreementurl=n.one("input[name=useragreementurl]").get("value").trim(),t.auxiliarycamera=n.one("input[name=auxiliarycamera]").get("checked"),t.rules={},r=n.all(".rules input"),e.each(r,function(e){i=e.get("value"),e.get("checked")===!0?t.rules[i]=!0:t.rules[i]=!1}),t.groups=[],r=n.all(".groups input"),e.each(r,function(e){var n=e.get("value");e.get("checked")===!0&&t.groups.push(n)})},M.availability_examus.form.fillErrors=function(e,t){var n={};this.fillValue(n,t),(n.duration===undefined||!(new RegExp("^\\d+$")).test(n.duration)||n.duration%30!==0
)&&e.push("availability_examus:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
