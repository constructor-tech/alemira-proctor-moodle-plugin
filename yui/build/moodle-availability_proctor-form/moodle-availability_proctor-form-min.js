YUI.add("moodle-availability_proctor-form",function(J,e){M.availability_proctor=M.availability_proctor||{},M.availability_proctor.form=J.Object(M.core_availability.plugin),M.availability_proctor.form.rules=null,M.availability_proctor.form.initInner=function(e,i,n){this.rules=e,this.warnings=i,this.scoring=n},M.availability_proctor.form.instId=0,M.availability_proctor.form.getNode=function(e){var n,i,t,a,d,o,u,m,p,b,f,h,g,v,y,_,k,l,w,x,C,N,q,T,I,R,E,A,D,O,V,F,r,S,j,H,L,P,U,Y,$;function s(e,i){return i=i||"availability_proctor",M.util.get_string(e,i)}function z(e){var i=s("showmore","core_form"),n=s("showless","core_form");return'<a href="#" class="proctor-moreless" data-more="'+i+'" data-less="'+n+'">'+i+'</a><div class="hidden col-md-12">'+e+"</div>"}function c(e,i,n,t){var a=t?10:5,t=t?10:7;return'<span class="availability-group form-group mb-2"><div class="col-md-'+a+' col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+i+'</label></div><div class="col-md-'+t+' form-inline align-items-start felement">'+n+"</div></span>"}function B(e){setTimeout(e,0)}function G(e){1==e?(l.addClass("btn-primary"),l.removeClass("btn-secondary"),w.addClass("btn-secondary"),w.removeClass("btn-primary"),x.removeClass("hidden"),C.addClass("hidden")):(w.addClass("btn-primary"),w.removeClass("btn-secondary"),l.addClass("btn-secondary"),l.removeClass("btn-primary"),x.addClass("hidden"),C.removeClass("hidden"))}for(q in M.availability_proctor.form.instId+=1,d=(t="proctor"+M.availability_proctor.form.instId)+"_mode",o=t+"_schedulingRequired",u=t+"_autoRescheduling",m=t+"_isTrial",r=t+"_identification",p=t+"_customRules",b=t+"_noProtection",f=t+"_auxCamera",h=t+"_ldb",g=t+"_biometryEnabled",v=t+"_biometrySkipfail",y=t+"_biometryFlow",_=t+"_biometryTheme",k=t+"userAgreement",a=c(a=t+"_duration",s("duration"),'<input type="text" name="duration" id="'+a+'" class="form-control">'),a=(a=(a=(a=(a=(a=(a=(a=(a=(a+=c(d,s("proctoring_mode"),'<select name="mode" id="'+d+'" class="custom-select">  <option value="online">'+s("online_mode")+'</option>  <option value="identification">'+s("identification_mode")+'</option>  <option value="offline">'+s("offline_mode")+'</option>  <option value="auto">'+s("auto_mode")+"</option></select>"))+c(r,s("identification"),'<select name="identification" id="'+r+'" class="custom-select">  <option value="passport">'+s("passport_identification")+'</option>  <option value="face">'+s("face_identification")+'</option>  <option value="face_and_passport">'+s("face_passport_identification")+'</option>  <option value="skip">'+s("skip_identification")+"</option></select>"))+c(o,s("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+o+'" value="1">&nbsp;<label for="'+o+'">'+s("enable")+"</label> "))+c(u,s("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+u+'" value="1">&nbsp;<label for="'+u+'">'+s("enable")+"</label> "))+c(m,s("is_trial"),'<input type="checkbox" name="istrial" id="'+m+'" value="1">&nbsp;<label for="'+m+'">'+s("enable")+"</label> "))+c(b,s("noprotection"),'<input type="checkbox" name="noprotection" id="'+b+'" value="1">&nbsp;<label for="'+b+'">'+s("enable")+"</label> "))+c(f,s("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+f+'" value="1">&nbsp;<label for="'+f+'">'+s("enable")+"</label> "))+c(h,s("enable_ldb"),'<input type="checkbox" name="ldb" id="'+h+'" value="1">&nbsp;<label for="'+h+'">'+s("enable")+"</label> "))+c(k,s("user_agreement_url"),'<input name="useragreementurl" id="'+k+'" class="form-control" value="" />'))+c(p,s("custom_rules"),'<textarea name="customrules" id="'+p+'" style="width: 100%" class="form-control"></textarea>'),N="",this.rules)N=(N+='<br><input type="checkbox" name="'+q+'" id="'+(T=t+"_"+q)+'" value="'+q+'" >&nbsp;')+'<label for="'+T+'" style="white-space: break-spaces">'+s(q)+"</label>";for(R in a+=c(null,s("rules"),'<div class="rules" style="white-space:nowrap">'+N+"</div>"),I="",this.warnings)I=(I+='<input type="checkbox" name="'+R+'" id="'+(E=t+"_"+R)+'" value="'+R+'" >&nbsp;')+'<label for="'+E+'" style="white-space: break-spaces">'+s(R)+"</label><br>";for(D in A="",this.scoring)V='<input type="number" class="proctor-scoring-input" value=""step="0.01" name="'+D+'"id="scoring_'+(O=t+"_"+D)+'"min="'+this.scoring[D].min+'" max="'+this.scoring[D].max+'">',A+=c(O,s("scoring_"+D),V);if(r="",r=(r=(r=(r+=c(g,s("biometry_enabled"),'<input type="checkbox" name="biometryenabled" id="'+g+'" value="1">&nbsp;<label for="'+g+'">'+s("enable")+"</label> "))+c(v,s("biometry_skipfail"),'<input type="checkbox" name="biometryskipfail" id="'+v+'" value="1">&nbsp;<label for="'+v+'">'+s("enable")+"</label> "))+c(y,s("biometry_flow"),'<input type="text" name="biometryflow" id="'+y+'" class="form-control">'))+c(_,s("biometry_theme"),'<input type="text" name="biometrytheme" id="'+_+'" class="form-control">'),F="",F=(F=(F+=c(null,s("visible_warnings"),'<div class="warnings" style="white-space: nowrap" >'+z(I)+"</div>",!0))+c(null,s("scoring_params_header"),z(A),!0))+c(null,s("biometry_header"),z(r),!0),(n=J.Node.create('<span class="availability_proctor-tabs" style="position:relative"></span>')).setHTML("<label><strong>"+s("title")+"</strong></label><br><br>"),r=J.Node.create('<div style="position:absolute; top: 0; right: 0;" class="availability_proctor-tab-btns"></div>').appendTo(n),l=J.Node.create('<a href="#" class="btn btn-primary">1</a>').appendTo(r),w=J.Node.create('<a href="#" class="btn btn-secondary">2</a>').appendTo(r),x=J.Node.create('<div class="tab_content">'+a+"</div>").appendTo(n),C=J.Node.create('<div class="tab_content hidden">'+F+"</div>").appendTo(n),e.creating&&(e.mode="online",e.scheduling_required=!0),e.duration!==undefined&&n.one("input[name=duration]").set("value",e.duration),e.mode!==undefined&&n.one("select[name=mode] option[value="+e.mode+"]").set("selected","selected"),e.identification!==undefined&&n.one("select[name=identification] option[value="+e.identification+"]").set(
"selected","selected"),e.auto_rescheduling!==undefined&&(i=e.auto_rescheduling?"checked":null,n.one("#"+u).set("checked",i)),e.noprotection!==undefined&&(i=e.noprotection?"checked":null,n.one("#"+b).set("checked",i)),e.istrial!==undefined&&(i=e.istrial?"checked":null,n.one("#"+m).set("checked",i)),e.auxiliarycamera!==undefined&&(i=e.auxiliarycamera?"checked":null,n.one("#"+f).set("checked",i)),e.ldb!==undefined&&(i=e.ldb?"checked":null,n.one("#"+h).set("checked",i)),e.scheduling_required!==undefined&&(i=e.scheduling_required?"checked":null,n.one("#"+o).set("checked",i)),e.rules===undefined&&(e.rules=this.rules),e.biometryenabled!==undefined&&(i=e.biometryenabled?"checked":null,n.one("#"+g).set("checked",i)),e.biometryskipfail!==undefined&&(i=e.biometryskipfail?"checked":null,n.one("#"+v).set("checked",i)),e.biometryflow!==undefined&&n.one("#"+y).set("value",e.biometryflow),e.biometrytheme!==undefined&&n.one("#"+_).set("value",e.biometrytheme),e.warnings===undefined)e.warnings=this.warnings;else for(j in S=e.warnings,e.warnings=this.warnings,S)e.warnings[j]=S[j];for(H in e.rules)e.rules[H]&&(L=n.one(".rules input[name="+H+"]"))&&L.set("checked","checked");for(P in e.warnings)e.warnings[P]&&(U=n.one(".warnings input[name="+P+"]"))&&U.set("checked","checked");for(Y in e.scoring=e.scoring||{},e.scoring)isNaN(e.scoring[Y])||($=n.one(".proctor-scoring-input[name="+Y+"]"))&&$.set("value",e.scoring[Y]);return e.customrules!==undefined&&n.one("#"+p).set("value",e.customrules),e.useragreementurl!==undefined&&n.one("#"+k).set("value",e.useragreementurl),n.delegate("valuechange",function(){B(function(){M.core_availability.form.update()})},"input,textarea,select"),n.delegate("click",function(){B(function(){M.core_availability.form.update()})},"input[type=checkbox]"),n.delegate("valuechange",function(){var e,i;e=["normal","identification"],i=n.one("select[name=mode]").get("value").trim(),i=0<=e.indexOf(i),n.one("#"+o).set("checked",i)},"#"+d),l.on("click",function(e){e.preventDefault(),G(1)}),w.on("click",function(e){e.preventDefault(),G(2)}),n.delegate("click",function(e){var i;e.preventDefault(),e=e.target,i=e.next(),i.hasClass("hidden")?(i.removeClass("hidden"),e.setContent(e.getAttribute("data-less"))):(i.addClass("hidden"),e.setContent(e.getAttribute("data-more")))},".proctor-moreless"),n},M.availability_proctor.form.fillValue=function(i,e){var n,t;i.duration=e.one("input[name=duration]").get("value").trim(),i.mode=e.one("select[name=mode]").get("value").trim(),i.identification=e.one("select[name=identification]").get("value").trim(),i.auto_rescheduling=e.one("input[name=auto_rescheduling]").get("checked"),i.scheduling_required=e.one("input[name=scheduling_required]").get("checked"),i.istrial=e.one("input[name=istrial]").get("checked"),i.customrules=e.one("textarea[name=customrules]").get("value").trim(),i.noprotection=e.one("input[name=noprotection]").get("checked"),i.useragreementurl=e.one("input[name=useragreementurl]").get("value").trim(),i.auxiliarycamera=e.one("input[name=auxiliarycamera]").get("checked"),i.ldb=e.one("input[name=ldb]").get("checked"),i.biometryenabled=e.one("input[name=biometryenabled]").get("checked"),i.biometryskipfail=e.one("input[name=biometryskipfail]").get("checked"),i.biometryflow=e.one("input[name=biometryflow]").get("value").trim(),i.biometrytheme=e.one("input[name=biometrytheme]").get("value").trim(),i.rules={},n=e.all(".rules input"),J.each(n,function(e){t=e.get("value"),!0===e.get("checked")?i.rules[t]=!0:i.rules[t]=!1}),i.warnings={},n=e.all(".warnings input"),J.each(n,function(e){t=e.get("value"),!0===e.get("checked")?i.warnings[t]=!0:i.warnings[t]=!1}),i.scoring={},n=e.all(".proctor-scoring-input"),J.each(n,function(e){t=e.get("name");e=e.get("value").trim();0<e.length?i.scoring[t]=parseFloat(e):i.scoring[t]=null})},M.availability_proctor.form.fillErrors=function(e,i){var n={};this.fillValue(n,i),n.duration!==undefined&&new RegExp("^\\d+$").test(n.duration)&&n.duration%30==0||e.push("availability_proctor:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});