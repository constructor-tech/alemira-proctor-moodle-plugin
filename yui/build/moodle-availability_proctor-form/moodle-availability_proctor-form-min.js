YUI.add("moodle-availability_proctor-form",function(Z,e){M.availability_proctor=M.availability_proctor||{},M.availability_proctor.form=Z.Object(M.core_availability.plugin),M.availability_proctor.form.rules=null,M.availability_proctor.form.initInner=function(e,i,n,a){this.rules=e,this.warnings=i,this.scoring=n,this.defaults=a},M.availability_proctor.form.instId=0,M.availability_proctor.form.getNode=function(e){var n,i,a,t,l,o,r,s,c,d,u,m,p,b,f,h,v,g,y,_,k,S,w,x,j,C,q,H,L,N,U,Y,T,I,R,E,V,$,z,A,B,G,J,K,D,P;function F(e,i){return i=i||"availability_proctor",M.util.get_string(e,i)}function Q(e){var i=F("showmore","core_form"),n=F("showless","core_form");return'<a href="#" class="proctor-moreless" data-more="'+i+'" data-less="'+n+'">'+i+'</a><div class="hidden col-md-12">'+e+"</div>"}function O(e,i,n,a){var t=a?10:5,a=a?10:7;return'<span class="availability-group form-group mb-2"><div class="col-md-'+t+' col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+i+'</label></div><div class="col-md-'+a+' form-inline align-items-start felement">'+n+"</div></span>"}function W(e){setTimeout(e,0)}function X(e){1==e?(y.addClass("btn-primary"),y.removeClass("btn-secondary"),_.addClass("btn-secondary"),_.removeClass("btn-primary"),k.removeClass("hidden"),S.addClass("hidden")):(_.addClass("btn-primary"),_.removeClass("btn-secondary"),y.addClass("btn-secondary"),y.removeClass("btn-primary"),k.addClass("hidden"),S.removeClass("hidden"))}for(x in M.availability_proctor.form.instId+=1,t=(i="proctor"+M.availability_proctor.form.instId)+"_mode",l=i+"_schedulingRequired",o=i+"_autoRescheduling",r=i+"_isTrial",I=i+"_identification",s=i+"_customRules",c=i+"_auxCamera",d=i+"_allowmultipledisplays",u=i+"_allowvirtualenvironment",m=i+"_checkidphotoquality",p=i+"_ldb",b=i+"_biometryEnabled",f=i+"_biometrySkipfail",h=i+"_biometryFlow",v=i+"_biometryTheme",g=i+"_userAgreement",T=i+"_webCameraMainView",a=O(a=i+"_duration",F("duration"),'<input type="text" name="duration" id="'+a+'" class="form-control">'),a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a+=O(t,F("proctoring_mode"),'<select name="mode" id="'+t+'" class="custom-select">  <option value="online">'+F("online_mode")+'</option>  <option value="identification">'+F("identification_mode")+'</option>  <option value="offline">'+F("offline_mode")+'</option>  <option value="auto">'+F("auto_mode")+"</option></select>"))+O(I,F("identification"),'<select name="identification" id="'+I+'" class="custom-select">  <option value="passport">'+F("passport_identification")+'</option>  <option value="face">'+F("face_identification")+'</option>  <option value="face_and_passport">'+F("face_passport_identification")+'</option>  <option value="skip">'+F("skip_identification")+"</option></select>"))+O(T,F("web_camera_main_view"),'<select name="webcameramainview" id="'+T+'" class="custom-select">  <option value="front">'+F("web_camera_main_view_front")+'</option>  <option value="side">'+F("web_camera_main_view_side")+"</option></select>"))+O(l,F("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+l+'" value="1">&nbsp;<label for="'+l+'">'+F("enable")+"</label> "))+O(o,F("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+o+'" value="1">&nbsp;<label for="'+o+'">'+F("enable")+"</label> "))+O(r,F("is_trial"),'<input type="checkbox" name="istrial" id="'+r+'" value="1">&nbsp;<label for="'+r+'">'+F("enable")+"</label> "))+O(c,F("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+c+'" value="1">&nbsp;<label for="'+c+'">'+F("enable")+"</label> "))+O(p,F("enable_ldb"),'<input type="checkbox" name="ldb" id="'+p+'" value="1">&nbsp;<label for="'+p+'">'+F("enable")+"</label> "))+O(d,F("allowmultipledisplays"),'<input type="checkbox" name="allowmultipledisplays" id="'+d+'" value="1">&nbsp;<label for="'+d+'">'+F("enable")+"</label> "))+O(u,F("allowvirtualenvironment"),'<input type="checkbox" name="allowvirtualenvironment" id="'+u+'" value="1">&nbsp;<label for="'+u+'">'+F("enable")+"</label> "))+O(m,F("checkidphotoquality"),'<input type="checkbox" name="checkidphotoquality" id="'+m+'" value="1">&nbsp;<label for="'+m+'">'+F("enable")+"</label> "))+O(g,F("user_agreement_url"),'<input name="useragreementurl" id="'+g+'" class="form-control" value="" />'))+O(s,F("custom_rules"),'<textarea name="customrules" id="'+s+'" style="width: 100%" class="form-control"></textarea>'),w="",this.rules)w=(w+='<br><input type="checkbox" name="'+x+'" id="'+(j=i+"_"+x)+'" value="'+x+'" >&nbsp;')+'<label for="'+j+'" style="white-space: break-spaces">'+F(x)+"</label>";for(q in a+=O(null,F("rules"),'<div class="rules" style="white-space:nowrap">'+w+"</div>"),C="",this.warnings)C=(C+='<input type="checkbox" name="'+q+'" id="'+(H=i+"_"+q)+'" value="'+q+'" >&nbsp;')+'<label for="'+H+'" style="white-space: break-spaces">'+F(q)+"</label><br>";for(N in L="",this.scoring)Y='<input type="number" class="proctor-scoring-input" value=""step="0.01" name="'+N+'"id="scoring_'+(U=i+"_"+N)+'"min="'+this.scoring[N].min+'" max="'+this.scoring[N].max+'">',L+=O(U,F("scoring_"+N),Y);if(I="",I=(I=(I=(I+=O(b,F("biometry_enabled"),'<input type="checkbox" name="biometryenabled" id="'+b+'" value="1">&nbsp;<label for="'+b+'">'+F("enable")+"</label> "))+O(f,F("biometry_skipfail"),'<input type="checkbox" name="biometryskipfail" id="'+f+'" value="1">&nbsp;<label for="'+f+'">'+F("enable")+"</label> "))+O(h,F("biometry_flow"),'<input type="text" name="biometryflow" id="'+h+'" class="form-control">'))+O(v,F("biometry_theme"),'<input type="text" name="biometrytheme" id="'+v+'" class="form-control">'),T="",T=(T=(T+=O(null,F("visible_warnings"),'<div class="warnings" style="white-space: nowrap" >'+Q(C)+"</div>",!0))+O(null,F("scoring_params_header"),Q(L),!0))+O(null,F("biometry_header"),Q(I),!0),(n=Z.Node.create('<span class="availability_proctor-tabs" style="position:relative"></span>')).setHTML("<label><strong>"+F("title")+"</strong></label><br><br>"),I=Z.Node.create(
'<div style="position:absolute; top: 0; right: 0;" class="availability_proctor-tab-btns"></div>').appendTo(n),y=Z.Node.create('<a href="#" class="btn btn-primary">1</a>').appendTo(I),_=Z.Node.create('<a href="#" class="btn btn-secondary">2</a>').appendTo(I),k=Z.Node.create('<div class="tab_content">'+a+"</div>").appendTo(n),S=Z.Node.create('<div class="tab_content hidden">'+T+"</div>").appendTo(n),e.rules===undefined&&(e.rules=this.rules),e.warnings===undefined&&(e.warnings=this.warnings),e.scoring=e.scoring||{},e.creating){for(R in this.defaults)if(E=this.defaults[R],"scoring"==R)for(V in E)e.scoring[V]=E[V]?parseFloat(E[V]):null;else if("rules"==R)for($ in E)e.rules[$]=E[$];else if("warnings"==R)for(z in E)e.warnings[z]=!!E[z];else e[R]=E;e.mode||(e.mode="online",e.scheduling_required=!0)}for(A in e.duration!==undefined&&n.one("input[name=duration]").set("value",e.duration),e.mode!==undefined&&n.one("select[name=mode] option[value="+e.mode+"]").set("selected","selected"),e.identification!==undefined&&n.one("select[name=identification] option[value="+e.identification+"]").set("selected","selected"),e.webcameramainview&&n.one("select[name=webcameramainview] option[value="+e.webcameramainview+"]").set("selected","selected"),e.auto_rescheduling!==undefined&&n.one("#"+o).set("checked",e.auto_rescheduling?"checked":null),e.istrial!==undefined&&(I=e.istrial?"checked":null,n.one("#"+r).set("checked",I)),e.auxiliarycamera!==undefined&&n.one("#"+c).set("checked",e.auxiliarycamera?"checked":null),e.ldb!==undefined&&n.one("#"+p).set("checked",e.ldb?"checked":null),e.scheduling_required!==undefined&&n.one("#"+l).set("checked",e.scheduling_required?"checked":null),e.allowmultipledisplays!==undefined&&n.one("#"+d).set("checked",e.allowmultipledisplays?"checked":null),e.allowvirtualenvironment!==undefined&&n.one("#"+u).set("checked",e.allowvirtualenvironment?"checked":null),e.checkidphotoquality!==undefined&&n.one("#"+m).set("checked",e.checkidphotoquality?"checked":null),e.biometryenabled!==undefined&&n.one("#"+b).set("checked",e.biometryenabled?"checked":null),e.biometryskipfail!==undefined&&n.one("#"+f).set("checked",e.biometryskipfail?"checked":null),e.biometryflow!==undefined&&n.one("#"+h).set("value",e.biometryflow),e.biometrytheme!==undefined&&n.one("#"+v).set("value",e.biometrytheme),this.warnings)e.warnings[A]===undefined&&(e.warnings[A]=this.warnings[A]);for(B in e.warnings)e.warnings[B]&&(G=n.one(".warnings input[name="+B+"]"))&&G.set("checked","checked");for(J in e.rules)e.rules[J]&&(K=n.one(".rules input[name="+J+"]"))&&K.set("checked","checked");for(D in e.scoring)isNaN(e.scoring[D])||(P=n.one(".proctor-scoring-input[name="+D+"]"))&&P.set("value",e.scoring[D]);return e.customrules!==undefined&&n.one("#"+s).set("value",e.customrules),e.useragreementurl!==undefined&&n.one("#"+g).set("value",e.useragreementurl),n.delegate("valuechange",function(){W(function(){M.core_availability.form.update()})},"input,textarea,select"),n.delegate("click",function(){W(function(){M.core_availability.form.update()})},"input[type=checkbox]"),n.delegate("valuechange",function(){var e,i;e=["normal","identification"],i=n.one("select[name=mode]").get("value").trim(),i=0<=e.indexOf(i),n.one("#"+l).set("checked",i)},"#"+t),y.on("click",function(e){e.preventDefault(),X(1)}),_.on("click",function(e){e.preventDefault(),X(2)}),n.delegate("click",function(e){var i;e.preventDefault(),e=e.target,i=e.next(),i.hasClass("hidden")?(i.removeClass("hidden"),e.setContent(e.getAttribute("data-less"))):(i.addClass("hidden"),e.setContent(e.getAttribute("data-more")))},".proctor-moreless"),n},M.availability_proctor.form.fillValue=function(i,e){var n,a;i.duration=e.one("input[name=duration]").get("value").trim(),i.mode=e.one("select[name=mode]").get("value").trim(),i.identification=e.one("select[name=identification]").get("value").trim(),i.webcameramainview=e.one("select[name=webcameramainview]").get("value").trim(),i.auto_rescheduling=e.one("input[name=auto_rescheduling]").get("checked"),i.scheduling_required=e.one("input[name=scheduling_required]").get("checked"),i.istrial=e.one("input[name=istrial]").get("checked"),i.customrules=e.one("textarea[name=customrules]").get("value").trim(),i.useragreementurl=e.one("input[name=useragreementurl]").get("value").trim(),i.auxiliarycamera=e.one("input[name=auxiliarycamera]").get("checked"),i.ldb=e.one("input[name=ldb]").get("checked"),i.allowmultipledisplays=e.one("input[name=allowmultipledisplays]").get("checked"),i.allowvirtualenvironment=e.one("input[name=allowvirtualenvironment]").get("checked"),i.checkidphotoquality=e.one("input[name=checkidphotoquality]").get("checked"),i.biometryenabled=e.one("input[name=biometryenabled]").get("checked"),i.biometryskipfail=e.one("input[name=biometryskipfail]").get("checked"),i.biometryflow=e.one("input[name=biometryflow]").get("value").trim(),i.biometrytheme=e.one("input[name=biometrytheme]").get("value").trim(),i.rules={},n=e.all(".rules input"),Z.each(n,function(e){a=e.get("value"),!0===e.get("checked")?i.rules[a]=!0:i.rules[a]=!1}),i.warnings={},n=e.all(".warnings input"),Z.each(n,function(e){a=e.get("value"),!0===e.get("checked")?i.warnings[a]=!0:i.warnings[a]=!1}),i.scoring={},n=e.all(".proctor-scoring-input"),Z.each(n,function(e){a=e.get("name");e=e.get("value").trim();0<e.length?i.scoring[a]=parseFloat(e):i.scoring[a]=null})},M.availability_proctor.form.fillErrors=function(e,i){var n={};this.fillValue(n,i),n.duration!==undefined&&new RegExp("^\\d+$").test(n.duration)&&n.duration%30==0||e.push("availability_proctor:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});