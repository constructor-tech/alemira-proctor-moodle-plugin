YUI.add("moodle-availability_proctor-form",function(G,e){M.availability_proctor=M.availability_proctor||{},M.availability_proctor.form=G.Object(M.core_availability.plugin),M.availability_proctor.form.rules=null,M.availability_proctor.form.initInner=function(e,i,n){this.rules=e,this.warnings=i,this.scoring=n},M.availability_proctor.form.instId=0,M.availability_proctor.form.getNode=function(e){var n,i,t,a,o,l,r,s,c,d,u,m,p,b,f,h,g,v,y,S,_,k,j,w,x,H,L,C,N,q,T,I,R,E,A,P,D,U,O,Y;function V(e,i){return i=i||"availability_proctor",M.util.get_string(e,i)}function $(e){var i=V("showmore","core_form"),n=V("showless","core_form");return'<a href="#" class="proctor-moreless" data-more="'+i+'" data-less="'+n+'">'+i+'</a><div class="hidden col-md-12">'+e+"</div>"}function F(e,i,n,t){var a=t?10:5,t=t?10:7;return'<span class="availability-group form-group mb-2"><div class="col-md-'+a+' col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+i+'</label></div><div class="col-md-'+t+' form-inline align-items-start felement">'+n+"</div></span>"}function z(e){setTimeout(e,0)}function B(e){1==e?(q.addClass("btn-primary"),q.removeClass("btn-secondary"),T.addClass("btn-secondary"),T.removeClass("btn-primary"),I.removeClass("hidden"),R.addClass("hidden")):(T.addClass("btn-primary"),T.removeClass("btn-secondary"),q.addClass("btn-secondary"),q.removeClass("btn-primary"),I.addClass("hidden"),R.removeClass("hidden"))}for(y in M.availability_proctor.form.instId+=1,o=(t="proctor"+M.availability_proctor.form.instId)+"_mode",l=t+"_schedulingRequired",r=t+"_autoRescheduling",s=t+"_isTrial",N=t+"_identification",c=t+"_customRules",d=t+"_noProtection",u=t+"_auxCamera",m=t+"_ldb",p=t+"_biometryEnabled",b=t+"_biometrySkipfail",f=t+"_biometryFlow",h=t+"_biometryTheme",g=t+"userAgreement",a=F(a=t+"_duration",V("duration"),'<input type="text" name="duration" id="'+a+'" class="form-control">'),a=(a=(a=(a=(a=(a=(a=(a=(a=(a+=F(o,V("proctoring_mode"),'<select name="mode" id="'+o+'" class="custom-select">  <option value="online">'+V("online_mode")+'</option>  <option value="identification">'+V("identification_mode")+'</option>  <option value="offline">'+V("offline_mode")+'</option>  <option value="auto">'+V("auto_mode")+"</option></select>"))+F(N,V("identification"),'<select name="identification" id="'+N+'" class="custom-select">  <option value="passport">'+V("passport_identification")+'</option>  <option value="face">'+V("face_identification")+'</option>  <option value="face_and_passport">'+V("face_passport_identification")+'</option>  <option value="skip">'+V("skip_identification")+"</option></select>"))+F(l,V("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+l+'" value="1">&nbsp;<label for="'+l+'">'+V("enable")+"</label> "))+F(r,V("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+r+'" value="1">&nbsp;<label for="'+r+'">'+V("enable")+"</label> "))+F(s,V("is_trial"),'<input type="checkbox" name="istrial" id="'+s+'" value="1">&nbsp;<label for="'+s+'">'+V("enable")+"</label> "))+F(d,V("noprotection"),'<input type="checkbox" name="noprotection" id="'+d+'" value="1">&nbsp;<label for="'+d+'">'+V("enable")+"</label> "))+F(u,V("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+u+'" value="1">&nbsp;<label for="'+u+'">'+V("enable")+"</label> "))+F(m,V("enable_ldb"),'<input type="checkbox" name="ldb" id="'+m+'" value="1">&nbsp;<label for="'+m+'">'+V("enable")+"</label> "))+F(g,V("user_agreement_url"),'<input name="useragreementurl" id="'+g+'" class="form-control" value="" />'))+F(c,V("custom_rules"),'<textarea name="customrules" id="'+c+'" style="width: 100%" class="form-control"></textarea>'),v="",this.rules)v=(v+='<br><input type="checkbox" name="'+y+'" id="'+(S=t+"_"+y)+'" value="'+y+'" >&nbsp;')+'<label for="'+S+'" style="white-space: break-spaces">'+V(y)+"</label>";for(k in a+=F(null,V("rules"),'<div class="rules" style="white-space:nowrap">'+v+"</div>"),_="",this.warnings)_=(_+='<input type="checkbox" name="'+k+'" id="'+(j=t+"_"+k)+'" value="'+k+'" >&nbsp;')+'<label for="'+j+'" style="white-space: break-spaces">'+V(k)+"</label><br>";for(x in w="",this.scoring)L='<input type="number" class="proctor-scoring-input" value=""step="0.01" name="'+x+'"id="scoring_'+(H=t+"_"+x)+'"min="'+this.scoring[x].min+'" max="'+this.scoring[x].max+'">',w+=F(H,V("scoring_"+x),L);if(N="",N=(N=(N=(N+=F(p,V("biometry_enabled"),'<input type="checkbox" name="biometryenabled" id="'+p+'" value="1">&nbsp;<label for="'+p+'">'+V("enable")+"</label> "))+F(b,V("biometry_skipfail"),'<input type="checkbox" name="biometryskipfail" id="'+b+'" value="1">&nbsp;<label for="'+b+'">'+V("enable")+"</label> "))+F(f,V("biometry_flow"),'<input type="text" name="biometryflow" id="'+f+'" class="form-control">'))+F(h,V("biometry_theme"),'<input type="text" name="biometrytheme" id="'+h+'" class="form-control">'),C="",C=(C=(C+=F(null,V("visible_warnings"),'<div class="warnings" style="white-space: nowrap" >'+$(_)+"</div>",!0))+F(null,V("scoring_params_header"),$(w),!0))+F(null,V("biometry_header"),$(N),!0),(n=G.Node.create('<span class="availibility_proctor-tabs" style="position:relative"></span>')).setHTML("<label><strong>"+V("title")+"</strong></label><br><br>"),N=G.Node.create('<div style="position:absolute; top: 0; right: 0;" class="availibility_proctor-tab-btns"></div>').appendTo(n),q=G.Node.create('<a href="#" class="btn btn-primary">1</a>').appendTo(N),T=G.Node.create('<a href="#" class="btn btn-secondary">2</a>').appendTo(N),I=G.Node.create('<div class="tab_content">'+a+"</div>").appendTo(n),R=G.Node.create('<div class="tab_content hidden">'+C+"</div>").appendTo(n),e.creating&&(e.mode="online",e.scheduling_required=!0),e.duration!==undefined&&n.one("input[name=duration]").set("value",e.duration),e.mode!==undefined&&n.one("select[name=mode] option[value="+e.mode+"]").set("selected","selected"),e.identification!==undefined&&n.one("select[name=identification] option[value="+e.identification+"]").set(
"selected","selected"),e.auto_rescheduling!==undefined&&(i=e.auto_rescheduling?"checked":null,n.one("#"+r).set("checked",i)),e.noprotection!==undefined&&(i=e.noprotection?"checked":null,n.one("#"+d).set("checked",i)),e.istrial!==undefined&&(i=e.istrial?"checked":null,n.one("#"+s).set("checked",i)),e.auxiliarycamera!==undefined&&(i=e.auxiliarycamera?"checked":null,n.one("#"+u).set("checked",i)),e.ldb!==undefined&&(i=e.ldb?"checked":null,n.one("#"+m).set("checked",i)),e.scheduling_required!==undefined&&(i=e.scheduling_required?"checked":null,n.one("#"+l).set("checked",i)),e.rules===undefined&&(e.rules=this.rules),e.biometryenabled!==undefined&&(i=e.biometryenabled?"checked":null,n.one("#"+p).set("checked",i)),e.biometryskipfail!==undefined&&(i=e.biometryskipfail?"checked":null,n.one("#"+b).set("checked",i)),e.biometryflow!==undefined&&n.one("#"+f).set("value",e.biometryflow),e.biometrytheme!==undefined&&n.one("#"+h).set("value",e.biometrytheme),e.warnings===undefined)e.warnings=this.warnings;else for(k in E=e.warnings,e.warnings=this.warnings,E)e.warnings[k]=E[k];for(A in e.rules)e.rules[A]&&(P=n.one(".rules input[name="+A+"]"))&&P.set("checked","checked");for(D in e.warnings)e.warnings[D]&&(U=n.one(".warnings input[name="+D+"]"))&&U.set("checked","checked");for(O in e.scoring=e.scoring||{},e.scoring)isNaN(e.scoring[O])||(Y=n.one(".proctor-scoring-input[name="+O+"]"))&&Y.set("value",e.scoring[O]);return e.customrules!==undefined&&n.one("#"+c).set("value",e.customrules),e.useragreementurl!==undefined&&n.one("#"+g).set("value",e.useragreementurl),n.delegate("valuechange",function(){z(function(){M.core_availability.form.update()})},"input,textarea,select"),n.delegate("click",function(){z(function(){M.core_availability.form.update()})},"input[type=checkbox]"),n.delegate("valuechange",function(){var e,i;e=["normal","identification"],i=n.one("select[name=mode]").get("value").trim(),i=0<=e.indexOf(i),n.one("#"+l).set("checked",i)},"#"+o),q.on("click",function(e){e.preventDefault(),B(1)}),T.on("click",function(e){e.preventDefault(),B(2)}),n.delegate("click",function(e){var i;e.preventDefault(),e=e.target,i=e.next(),i.hasClass("hidden")?(i.removeClass("hidden"),e.setContent(e.getAttribute("data-less"))):(i.addClass("hidden"),e.setContent(e.getAttribute("data-more")))},".proctor-moreless"),n},M.availability_proctor.form.fillValue=function(i,e){var n,t;i.duration=e.one("input[name=duration]").get("value").trim(),i.mode=e.one("select[name=mode]").get("value").trim(),i.identification=e.one("select[name=identification]").get("value").trim(),i.auto_rescheduling=e.one("input[name=auto_rescheduling]").get("checked"),i.scheduling_required=e.one("input[name=scheduling_required]").get("checked"),i.istrial=e.one("input[name=istrial]").get("checked"),i.customrules=e.one("textarea[name=customrules]").get("value").trim(),i.noprotection=e.one("input[name=noprotection]").get("checked"),i.useragreementurl=e.one("input[name=useragreementurl]").get("value").trim(),i.auxiliarycamera=e.one("input[name=auxiliarycamera]").get("checked"),i.ldb=e.one("input[name=ldb]").get("checked"),i.biometryenabled=e.one("input[name=biometryenabled]").get("checked"),i.biometryskipfail=e.one("input[name=biometryskipfail]").get("checked"),i.biometryflow=e.one("input[name=biometryflow]").get("value").trim(),i.biometrytheme=e.one("input[name=biometrytheme]").get("value").trim(),i.rules={},n=e.all(".rules input"),G.each(n,function(e){t=e.get("value"),!0===e.get("checked")?i.rules[t]=!0:i.rules[t]=!1}),i.warnings={},n=e.all(".warnings input"),G.each(n,function(e){t=e.get("value"),!0===e.get("checked")?i.warnings[t]=!0:i.warnings[t]=!1}),i.scoring={},n=e.all(".proctor-scoring-input"),G.each(n,function(e){t=e.get("name");e=e.get("value").trim();0<e.length?i.scoring[t]=parseFloat(e):i.scoring[t]=null})},M.availability_proctor.form.fillErrors=function(e,i){var n={};this.fillValue(n,i),n.duration!==undefined&&new RegExp("^\\d+$").test(n.duration)&&n.duration%30==0||e.push("availability_proctor:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});