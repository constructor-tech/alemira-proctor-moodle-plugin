YUI.add("moodle-availability_examus2-form",function(G,e){M.availability_examus2=M.availability_examus2||{},M.availability_examus2.form=G.Object(M.core_availability.plugin),M.availability_examus2.form.rules=null,M.availability_examus2.form.initInner=function(e,n,i,a){this.rules=e,this.groups=n,this.warnings=i,this.scoring=a},M.availability_examus2.form.instId=0,M.availability_examus2.form.getNode=function(e){var n,i,a,t,l,s,o,r,u,c,d,m,p,f,g,b,h,v,_,y,x,k,w,C,q,I,N,T,R,A,O,D,E,V,j,H,L,P,S,U;function Y(e,n){return n=n||"availability_examus2",M.util.get_string(e,n)}function $(e){var n=Y("showmore","core_form"),i=Y("showless","core_form");return'<a href="#" class="examus-moreless" data-more="'+n+'" data-less="'+i+'">'+n+'</a><div class="hidden col-md-12">'+e+"</div>"}function z(e,n,i,a){var t=a?10:5,a=a?10:7;return'<span class="availability-group form-group mb-2"><div class="col-md-'+t+' col-form-label d-flex pb-0 pr-md-0">  <label for="'+e+'">'+n+'</label></div><div class="col-md-'+a+' form-inline align-items-start felement">'+i+"</div></span>"}function B(e){setTimeout(e,0)}function F(e){1==e?(A.addClass("btn-primary"),A.removeClass("btn-secondary"),O.addClass("btn-secondary"),O.removeClass("btn-primary"),D.removeClass("hidden"),E.addClass("hidden")):(O.addClass("btn-primary"),O.removeClass("btn-secondary"),A.addClass("btn-secondary"),A.removeClass("btn-primary"),D.addClass("hidden"),E.removeClass("hidden"))}for(g in M.availability_examus2.form.instId+=1,l=(t="examus"+M.availability_examus2.form.instId)+"_mode",s=t+"_schedulingRequired",o=t+"_autoRescheduling",r=t+"_isTrial",R=t+"_identification",u=t+"_customRules",c=t+"_noProtection",d=t+"_auxCamera",m=t+"_ldb",p=t+"userAgreement",n=z(T=t+"_duration",Y("duration"),'<input type="text" name="duration" id="'+T+'" class="form-control">'),n+=z(l,Y("proctoring_mode"),'<select name="mode" id="'+l+'" class="custom-select">  <option value="online">'+Y("online_mode")+'</option>  <option value="identification">'+Y("identification_mode")+'</option>  <option value="offline">'+Y("offline_mode")+'</option>  <option value="auto">'+Y("auto_mode")+"</option></select>"),n+=z(R,Y("identification"),'<select name="identification" id="'+R+'" class="custom-select">  <option value="passport">'+Y("passport_identification")+'</option>  <option value="face">'+Y("face_identification")+'</option>  <option value="face_and_passport">'+Y("face_passport_identification")+'</option>  <option value="skip">'+Y("skip_identification")+"</option></select>"),n+=z(s,Y("scheduling_required"),'<input type="checkbox" name="scheduling_required" id="'+s+'" value="1">&nbsp;<label for="'+s+'">'+Y("enable")+"</label> "),n+=z(o,Y("auto_rescheduling"),'<input type="checkbox" name="auto_rescheduling" id="'+o+'" value="1">&nbsp;<label for="'+o+'">'+Y("enable")+"</label> "),n+=z(r,Y("is_trial"),'<input type="checkbox" name="istrial" id="'+r+'" value="1">&nbsp;<label for="'+r+'">'+Y("enable")+"</label> "),n+=z(c,Y("noprotection"),'<input type="checkbox" name="noprotection" id="'+c+'" value="1">&nbsp;<label for="'+c+'">'+Y("enable")+"</label> "),n+=z(d,Y("auxiliary_camera"),'<input type="checkbox" name="auxiliarycamera" id="'+d+'" value="1">&nbsp;<label for="'+d+'">'+Y("enable")+"</label> "),n+=z(m,Y("enable_ldb"),'<input type="checkbox" name="ldb" id="'+m+'" value="1">&nbsp;<label for="'+m+'">'+Y("enable")+"</label> "),n+=z(p,Y("user_agreement_url"),'<input name="useragreementurl" id="'+p+'" class="form-control" value="" />'),n+=z(u,Y("custom_rules"),'<textarea name="customrules" id="'+u+'" style="width: 100%" class="form-control"></textarea>'),f="",this.rules)f+='<br><input type="checkbox" name="'+g+'" id="'+(b=t+"_"+g)+'" value="'+g+'" >&nbsp;',f+='<label for="'+b+'" style="white-space: break-spaces">'+Y(g)+"</label>";if(n+=z(null,Y("rules"),'<div class="rules" style="white-space:nowrap">'+f+"</div>"),this.groups){for(v in h="",this.groups)_=this.groups[v].name,y=e.groups instanceof Array?e.groups:[],h+="<br><label><input value="+(t=parseInt(this.groups[v].id))+' type="checkbox" name=groups[] '+(-1<(y=y.map(function(e){return parseInt(e)})).indexOf(t)?"checked":"")+">&nbsp;"+_+"</label>";n+=z(null,Y("select_groups"),'<div class="groups"'+h+"</div>")}for(k in x="",this.warnings)x+='<input type="checkbox" name="'+k+'" id="'+(w=t+"_"+k)+'" value="'+k+'" >&nbsp;',x+='<label for="'+w+'" style="white-space: break-spaces">'+Y(k)+"</label><br>";for(q in C="",this.scoring)N='<input type="number" class="examus-scoring-input" value=""name="'+q+'"id="scoring_'+(I=t+"_"+q)+'"min="'+this.scoring[q].min+'" max="'+this.scoring[q].max+'">',C+=z(I,Y("scoring_"+q),N);if(T="",T+=z(null,Y("visible_warnings"),'<div class="warnings" style="white-space: nowrap" >'+$(x)+"</div>",!0),T+=z(null,Y("scoring_params_header"),$(C),!0),(i=G.Node.create('<span class="availibility_examus-tabs" style="position:relative"></span>')).setHTML("<label><strong>"+Y("title")+"</strong></label><br><br>"),R=G.Node.create('<div style="position:absolute; top: 0; right: 0;" class="availibility_examus-tab-btns"></div>').appendTo(i),A=G.Node.create('<a href="#" class="btn btn-primary">1</a>').appendTo(R),O=G.Node.create('<a href="#" class="btn btn-secondary">2</a>').appendTo(R),D=G.Node.create('<div class="tab_content">'+n+"</div>").appendTo(i),E=G.Node.create('<div class="tab_content hidden">'+T+"</div>").appendTo(i),e.creating&&(e.mode="online",e.scheduling_required=!0),e.duration!==undefined&&i.one("input[name=duration]").set("value",e.duration),e.mode!==undefined&&i.one("select[name=mode] option[value="+e.mode+"]").set("selected","selected"),e.identification!==undefined&&i.one("select[name=identification] option[value="+e.identification+"]").set("selected","selected"),e.auto_rescheduling!==undefined&&(a=e.auto_rescheduling?"checked":null,i.one("#"+o).set("checked",a)),e.noprotection!==undefined&&(a=e.noprotection?"checked":null,i.one("#"+c).set("checked",a)),e.istrial!==undefined&&(a=e.istrial?"checked":null,i.one("#"+r).set("checked",a)),
e.auxiliarycamera!==undefined&&(a=e.auxiliarycamera?"checked":null,i.one("#"+d).set("checked",a)),e.ldb!==undefined&&(a=e.ldb?"checked":null,i.one("#"+m).set("checked",a)),e.scheduling_required!==undefined&&(a=e.scheduling_required?"checked":null,i.one("#"+s).set("checked",a)),e.rules===undefined&&(e.rules=this.rules),e.warnings===undefined)e.warnings=this.warnings;else for(k in V=e.warnings,e.warnings=this.warnings,V)e.warnings[k]=V[k];for(j in e.rules)e.rules[j]&&(H=i.one(".rules input[name="+j+"]"))&&H.set("checked","checked");for(L in e.warnings)e.warnings[L]&&(P=i.one(".warnings input[name="+L+"]"))&&P.set("checked","checked");for(S in e.scoring=e.scoring||{},e.scoring)e.scoring[S]&&(U=i.one(".examus-scoring-input[name="+S+"]"))&&U.set("value",e.scoring[S]);return e.customrules!==undefined&&i.one("#"+u).set("value",e.customrules),e.useragreementurl!==undefined&&i.one("#"+p).set("value",e.useragreementurl),i.delegate("valuechange",function(){B(function(){M.core_availability.form.update()})},"input,textarea,select"),i.delegate("click",function(){B(function(){M.core_availability.form.update()})},"input[type=checkbox]"),i.delegate("valuechange",function(){var e,n;e=["normal","identification"],n=i.one("select[name=mode]").get("value").trim(),e=0<=e.indexOf(n),i.one("#"+s).set("checked",e)},"#"+l),A.on("click",function(e){e.preventDefault(),F(1)}),O.on("click",function(e){e.preventDefault(),F(2)}),i.delegate("click",function(e){var n;e.preventDefault(),n=e.target,e=n.next(),e.hasClass("hidden")?(e.removeClass("hidden"),n.setContent(n.getAttribute("data-less"))):(e.addClass("hidden"),n.setContent(n.getAttribute("data-more")))},".examus-moreless"),i},M.availability_examus2.form.fillValue=function(i,e){var n,a,t;i.duration=e.one("input[name=duration]").get("value").trim(),i.mode=e.one("select[name=mode]").get("value").trim(),i.identification=e.one("select[name=identification]").get("value").trim(),i.auto_rescheduling=e.one("input[name=auto_rescheduling]").get("checked"),i.scheduling_required=e.one("input[name=scheduling_required]").get("checked"),i.istrial=e.one("input[name=istrial]").get("checked"),i.customrules=e.one("textarea[name=customrules]").get("value").trim(),i.noprotection=e.one("input[name=noprotection]").get("checked"),i.useragreementurl=e.one("input[name=useragreementurl]").get("value").trim(),i.auxiliarycamera=e.one("input[name=auxiliarycamera]").get("checked"),i.ldb=e.one("input[name=ldb]").get("checked"),i.rules={},n=e.all(".rules input"),G.each(n,function(e){t=e.get("value"),!0===e.get("checked")?i.rules[t]=!0:i.rules[t]=!1}),i.warnings={},a=e.all(".warnings input"),G.each(a,function(e){t=e.get("value"),!0===e.get("checked")?i.warnings[t]=!0:i.warnings[t]=!1}),i.scoring={},a=e.all(".examus-scoring-input"),G.each(a,function(e){t=e.get("name");e=e.get("value").trim();0<e.length?i.scoring[t]=parseInt(e):i.scoring[t]=null}),i.groups=[],n=e.all(".groups input"),G.each(n,function(e){var n=e.get("value");!0===e.get("checked")&&i.groups.push(n)})},M.availability_examus2.form.fillErrors=function(e,n){var i={};this.fillValue(i,n),i.duration!==undefined&&new RegExp("^\\d+$").test(i.duration)&&i.duration%30==0||e.push("availability_examus2:error_setduration")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});